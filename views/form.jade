header
  .intro
    secion
      .container-fluid
        .content-intro
          header.title
            h3 Encontre um plano de saúde que melhor combina com seu bolso
            .row-fluid
              .span6
                ul.icons-ul
                  li.okay
                    i.icon-li.icon-ok
                    p Cotação online e gratuita
                    i.icon-li.icon-ok
                    p Simulação de forma simples, rápida e prática
                    i.icon-li.icon-ok
                    p Encontre o plano de saúde mais adequado ao seu orçamento
                    i.icon-li.icon-ok
                    p Entre em contato com o consultor 11-987024849

.container-outer
  .row-fluid
    #consultant-form
      form#form-plan.form-horizontal(novalidate)
        .span3
          .control-group
            .controls
              header.title-form
                h3 Dados para contato

          .control-group
            .controls.input-validation
              input#inputNome(type='text', placeholder='Nome completo', maxlength="50", pattern="\\s*[A-Za-z]+[A-Za-z\\s]*", required, data-validation-required-message="Obrigatório", data-validation-pattern-message="Apenas letras (mínimo 5 caracteres)")

          .control-group
            .controls.input-validation
              input#inputEmail(type='email', placeholder='Email para contato', maxlength="50", pattern=".{5,50}", required, data-validation-required-message="Obrigatório", data-validation-validemail-message="Email no formato inválido", data-validation-pattern-message="Mínimo 5 caracteres")

          .control-group
            .controls.input-validation
              input#inputTel(type='text', placeholder='Telefone residencial', maxlength="15", pattern="[0-9]{8,12}", data-validation-required-message="Obrigatório", data-validation-pattern-message="Mínimo 5 números")

          .control-group
            .controls.input-validation
              input#inputTel(type='text', placeholder='Telefone comercial', maxlength="15", pattern="[0-9]{8,12}", data-validation-required-message="Obrigatório", data-validation-pattern-message="Mínimo 5 números")

          .control-group
            .controls.input-validation
              input#inputTel(type='text', placeholder='Telefone celular', maxlength="15", pattern="[0-9]{8,12}", data-validation-required-message="Obrigatório", data-validation-pattern-message="Mínimo 5 números")

        .span5
          .control-group
            .controls
              header.title-form
                h3 Tipo de Plano

          .control-group
            .controls
              .btn-group
                a#type.btn.dropdown-toggle(data-toggle="dropdown") Individual
                  span.caret
                ul.dropdown-menu
                  li#type(type="1")
                    a#1 Individual
                    a#2 Familiar

          .control-group(style="margin-top:6%")
            .controls
              header.title-form
                h3 Quantidade de Vidas por Faixa Etária

          .control-group
            .controls
              .span2
                input#inputTel(type='text', placeholder='0-18', maxlength="2", style="width:100%");
              .span2.offset1
                input#inputTel(type='text', placeholder='19-23', maxlength="2", style="width:100%");
              .span2.offset1
                input#inputTel(type='text', placeholder='24-28', maxlength="2", style="width:100%");
              .span2.offset1
                input#inputTel(type='text', placeholder='29-33', maxlength="2", style="width:100%");

          .control-group
            .controls
              .span2
                input#inputTel(type='text', placeholder='34-38', maxlength="2", style="width:100%");
              .span2.offset1
                input#inputTel(type='text', placeholder='39-43', maxlength="2", style="width:100%");
              .span2.offset1
                input#inputTel(type='text', placeholder='44-48', maxlength="2", style="width:100%");
              .span2.offset1
                input#inputTel(type='text', placeholder='49-53', maxlength="2", style="width:100%");

          .control-group
            .controls.input-validation
              .span2
                input#inputTel(type='text', placeholder='+ 59', maxlength="2", style="width:100%");

        .span3.offset1(style="margin-top:10%")
          .row-fluid
            .btn.btn-primary.btn-large Planos & Valores
          .row-fluid(style="margin-top:10%")
            a.btn.btn-success.btn-large(href="#congrats", role="button", data-toggle="modal") Enviar

#congrats.modal.hide.fade
  .modal-header
    h4#thanks 
  .modal-body
    h3 Em breve um de nossos consultores entrará em contato
  .modal-footer
    a#closeModal.btn.btn-primary="Fechar"

script
  //- $("a#consultant").on('click', function(){
  //-   resetFields();
  //-   $("#consultant-form").removeClass("hide");
  //-   return false;
  //- });

  //- $("#online").on('click', function(){
  //-   resetFields();
  //-   $("#online-form").removeClass("hide");
  //-   return false;
  //- });

  $("#closeModal").on('click', function(){
    $("#congrats").modal('hide');
  });

  $("#send").on('click', function(){
    //resolve this. better way to solve it
    resetFields();
    return false;
  });

  $("ul li a").on('click',function(){
    $("a#type").text($(this).text());
    $("a#type").append('<span class="caret"></span>');
    $("li#type").attr('type',$(this).attr('id'));
  });

  function resetFields(){
    $("#thanks").text("");
    $("#inputNome").val("");
    $("#inputEmail").val("");
    $("#inputTel").val("");
    //- $("#consultant-form").addClass("hide");
    //- $("#online-form").addClass("hide");
  }

  $(function() {
      $("input").jqBootstrapValidation(
        {
          preventSubmit: true,
          submitError: function($form, event, errors) {
              // Here I do nothing, but you could do something like display 
              // the error messages to the user, log, etc.
          },
          submitSuccess: function($form, event) {
            var name=$("#inputNome").val().replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,'').replace(/\s+/g,' ').toUpperCase();
            var mail=$("#inputEmail").val();
            var phone=$("#inputTel").val();

            //resolve this. better way to solve it. ajax.. success/fail.. messages.. etc
            $.ajax({
              type: "post",
              url: "/plan",
              data: JSON.stringify({
                name: name,
                email: mail,
                phone: phone
              }),
              contentType: "application/json; charset=utf-8",
              dataType: "json",
              success: function(data){
                if(data.code==200){
                  resetFields();
                  //- $("#thanks").text("Obrigado, " + $("#inputNome").val().toUpperCase());
                  //- $("#congrats").modal('show');
                }
              },
              failure: function(errMsg) {
                console.log(errMsg);
              }
            });

            event.preventDefault();
          },
        }
      );
    });